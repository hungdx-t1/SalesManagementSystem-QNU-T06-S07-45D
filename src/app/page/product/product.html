<div class="product-page">
    
  <div class="top-actions">

  <input class="search-input"
         type="text"
         placeholder="TÃ¬m sáº£n pháº©m..."
         [(ngModel)]="searchKeyword"
         (input)="onSearch()" />

  <button class="btn green" (click)="openCreateCategory()">ThÃªm danh má»¥c</button>
  <button class="btn red" (click)="openCreateProduct()">ThÃªm sáº£n pháº©m</button>
  <button class="btn dark" *ngIf="showProductList" (click)="backToCategories()">Trá»Ÿ láº¡i</button>

</div>


  
  <!-- CATEGORY LIST -->
  <div class="category-tabs" *ngIf="!showProductList">
    <div *ngFor="let cat of categories" class="tab" (click)="openProducts(cat)">
      {{ cat.name }}
      <button (click)="openEditCategory(cat); $event.stopPropagation()">âœ</button>
      <button (click)="deleteCategory(cat.id); $event.stopPropagation()">ğŸ—‘</button>
    </div>
  </div>

  <!-- PRODUCT LIST -->
  <div class="category-tabs" *ngIf="showProductList">
    <div class="tab title">{{ selectedCategoryName }}</div>
  </div>

  <div class="category-tabs product-items" *ngIf="showProductList">
    <div *ngFor="let p of filteredProducts" class="tab product-box">
      {{ p.name }}
      <button (click)="openEditProduct(p)">âœ</button>
      <button (click)="deleteProduct(p.id)">ğŸ—‘</button>
    </div>
  </div>

  <!-- POPUP PRODUCT -->
  <div class="modal" *ngIf="showProductForm">
    <div class="modal-box">
      <h2>{{ isEditingProduct ? 'Sá»­a sáº£n pháº©m' : 'ThÃªm sáº£n pháº©m' }}</h2>

      <form (ngSubmit)="submitProduct()">

        <label>TÃªn:</label>
        <input type="text" [(ngModel)]="productForm.name" name="name" required />

        <label>GiÃ¡:</label>
        <input type="number" [(ngModel)]="productForm.price" name="price" required />

        <label>Sá»‘ lÆ°á»£ng:</label>
        <input type="number" [(ngModel)]="productForm.stock" name="quantity" required />

        <label>Danh má»¥c:</label>
        <select [(ngModel)]="productForm.categoryId" name="categoryId" required>
          <option *ngFor="let c of categories" [value]="c.id">{{ c.name }}</option>
        </select>

        <button class="btn green full" type="submit">{{ isEditingProduct ? 'Cáº­p nháº­t' : 'Táº¡o' }}</button>
        <button class="btn red full" type="button" (click)="closeProductForm()">Há»§y</button>

      </form>
    </div>
  </div>

  <!-- POPUP CATEGORY -->
  <div class="modal" *ngIf="showCategoryForm">
    <div class="modal-box">
      <h2>{{ isEditingCategory ? 'Sá»­a danh má»¥c' : 'ThÃªm danh má»¥c' }}</h2>

      <form (ngSubmit)="submitCategory()">

        <label>TÃªn danh má»¥c:</label>
        <input type="text" [(ngModel)]="categoryForm.name" name="catName" required />

        <button class="btn green full" type="submit">{{ isEditingCategory ? 'Cáº­p nháº­t' : 'Táº¡o' }}</button>
        <button class="btn red full" type="button" (click)="closeCategoryForm()">Há»§y</button>

      </form>
    </div>
  </div>

</div>
